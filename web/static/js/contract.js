
    $.getJSON('http://127.0.0.1:5000/contract?c=27&d=1&callback=?', function(odata) {

        data=[ [1325548800000,409.40,412.50,409.00,411.23,10794957],
            [1325635200000,410.00,414.68,409.28,413.44,9294444],
            [1325721600000,414.95,418.55,412.67,418.03,9688115],
            [1325808000000,419.77,422.75,419.22,422.40,11370916],
            [1326067200000,425.50,427.75,421.35,421.73,14072256],
            [1326153600000,425.91,426.00,421.50,423.24,9225966],
            [1326240000000,422.68,422.85,419.31,422.55,7685437],
            [1326326400000,422.28,422.90,418.75,421.39,7597273],
            [1326412800000,419.81,419.81,419.81,419.81,0],
            [1326758400000,424.20,425.99,422.96,424.70,8674865],
            [1326844800000,426.96,429.47,426.30,429.11,9885394],
            [1326931200000,430.15,431.37,426.51,427.75,9347779],
            [1327017600000,427.49,427.50,419.75,420.30,14784607],
            [1327276800000,422.67,428.45,422.30,427.41,10930778],
            [1327363200000,425.10,425.10,419.55,420.41,19558473],
            [1327449600000,454.44,454.45,443.73,446.66,34223691],
            [1327536000000,448.36,448.79,443.14,444.63,11579673],
            [1327622400000,444.34,448.48,443.77,447.28,10710233],
            [1327881600000,445.71,453.90,445.39,453.01,13547439],
            [1327968000000,455.59,458.24,453.07,456.48,13996855],
            /* Feb 2012 */
            [1328054400000,458.41,458.99,455.55,456.19,9644366],
            [1328140800000,455.90,457.17,453.98,455.12,6671221],
            [1328227200000,457.30,460.00,455.56,459.68,10245287],
            [1328486400000,458.38,464.98,458.20,463.97,8917228],
            [1328572800000,465.25,469.75,464.58,468.83,11293609],
            [1328659200000,470.50,476.79,469.70,476.68,14567040],
            [1328745600000,480.76,496.75,480.56,493.17,31579086],
            [1328832000000,490.96,497.62,488.55,493.42,22546425],
            [1329091200000,499.53,503.83,497.09,502.60,18471658],
            [1329177600000,504.66,509.56,502.00,509.46,16497573],
            [1329264000000,514.26,526.29,496.89,497.67,53789720],
            [1329350400000,491.50,504.89,486.63,502.21,33733915],
            [1329436800000,503.11,507.77,500.30,502.12,19135313],
            [1329782400000,506.88,514.85,504.12,514.85,21628057],
            [1329868800000,513.08,515.49,509.07,513.04,17260544],
            [1329955200000,515.08,517.83,509.50,516.39,20286616],
            [1330041600000,519.67,522.90,518.64,522.41,14831415],
            [1330300800000,521.31,528.50,516.28,525.76,19556472],
            [1330387200000,527.96,535.41,525.85,535.41,21442354],
            [1330473600000,541.56,547.61,535.70,542.44,34000054],
            /* Mar 2012 */
            [1330560000000,548.17,548.21,538.77,544.47,24401884],
            [1330646400000,544.24,546.80,542.52,545.18,15418227],
            [1330905600000,545.42,547.48,526.00,533.16,28897169],
            [1330992000000,523.66,533.69,516.22,530.26,28937093],
            [1331078400000,536.80,537.78,523.30,530.69,28518507],
            [1331164800000,534.69,542.99,532.12,541.99,18444389],
            [1331251200000,544.21,547.74,543.11,545.17,14960676],
            [1331510400000,548.98,552.00,547.00,552.00,14545717],
            [1331596800000,557.54,568.18,555.75,568.10,24673237],
            [1331683200000,578.05,594.72,575.40,589.58,50672821],
            [1331769600000,599.61,600.01,578.55,585.56,41416824],
            [1331856000000,584.72,589.20,578.00,585.57,29481697],
            [1332115200000,598.37,601.77,589.05,601.10,32186970],
            [1332201600000,599.51,606.90,582.00,605.96,29166719],
            [1332288000000,602.74,609.65,601.41,602.50,23001482],
            [1332374400000,597.78,604.50,595.53,599.34,22290414],
            [1332460800000,600.49,601.80,594.40,596.05,15374545],
            [1332720000000,599.79,607.15,595.26,606.98,21276317],
            [1332806400000,606.18,616.28,606.06,614.48,21683163],
            [1332892800000,618.38,621.45,610.31,617.62,23409267],
            [1332979200000,612.78,616.56,607.23,609.86,21722776],
            [1333065600000,608.77,610.56,597.94,599.55,26108485],
            /* Apr 2012 */
            [1333324800000,601.83,618.77,600.38,618.63,21369494],
            [1333411200000,627.30,632.21,622.51,629.32,29714508],
            [1333497600000,624.35,625.86,617.00,624.31,20463585],
            [1333584000000,626.98,634.66,623.40,633.68,22902694]
        ];
        data = odata['data'];
        // split the data set into ohlc and volume
        var ohlc = [],
            volume = [],
            dataLength = data.length;

        for (i = 0; i < dataLength; i++) {
            ohlc.push([
                data[i][0], // the date
                data[i][1], // open
                data[i][2], // high
                data[i][3], // low
                data[i][4] // close
            ]);

            volume.push([
                data[i][0], // the date
                data[i][5] // the volume
            ])
        }

        // set the allowed units for data grouping
        var groupingUnits = [[
            'week',                         // unit name
            [1]                             // allowed multiples
        ], [
            'month',
            [1, 2, 3]
        ]];

        // create the chart
        chart = new Highcharts.StockChart({
            chart: {
                renderTo: 'container',
                alignTicks: false
            },

            rangeSelector: {
                buttons : [ {
                    type : 'day',
                    count : 1,
                    text : '1D'
                },  {
                    type : 'week',
                    count : 1,
                    text : '1W'
                }, {
                    type : 'month',
                    count : 1,
                    text : '1M'
                }, {
                    type : 'all',
                    count : 1,
                    text : 'All'
                }],
                selected: 0
            },

            title: {
                text: 'AAPL Historical'
            },

            yAxis: [{
                title: {
                    text: 'OHLC'
                },
                height: 240,
                lineWidth: 1
            }, {
                title: {
                    text: 'Volume'
                },
                top: 307,
                height: 80,
                offset: 0,
                lineWidth: 1
            }],

            series: [{
                type: 'candlestick',
                name: 'AAPL',
                data: ohlc,
                dataGrouping: {
                    units: groupingUnits
                }
            }, {
                type: 'column',
                name: 'Volume',
                data: volume,
                yAxis: 1,
                dataGrouping: {
                    units: groupingUnits
                }
            }]
        });
    });
